<!DOCTYPE html>
<html>
<head>
    <title>Flask Multiple Upload</title>
    <link rel="stylesheet" type="text/css" href="__ADMIN__/css/style.css">
    <style type='text/css'>
        #holder {
            font-family: Arial;
            width: 500px;
            margin: 100px auto;
            text-align:center;
        }

        #output {
            padding-top: 20px;
            font-size: 11px;
        }

        /*a  upload */
        .a-upload {
            padding: 4px 224px;
            height: 29px;
            line-height: 22px;
            position: relative;
            cursor: pointer;
            color: #f7f6f7;
            background:#428bca;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            display: inline-block;
        }

        .a-upload  input {
            position: absolute;
            font-size: 100px;
            right: 0;
            top: 0;
            opacity: 0;
            filter: alpha(opacity=0);
            cursor: pointer
        }

        .a-upload:hover {
            color: #444;
            background: #eee;
            border-color: #ccc;
            text-decoration: none
        }
        #upload-button{
            position: absolute;
            height: 29px;
            width: 160px;
        }
    </style>
    <script type="text/javascript" src="__ADMIN__/js/uploadr.js"></script>
</head>
<body id="holder">
<h1>资料包上传</h1>
<hr>
<form id="upload-form" action="/admin/help/upDocument/" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="pro_id" value="{$pro_id}">
    <input type="hidden"  name="plId" value="{$plId}">
    <input type="hidden"  name="wfId" value="{$wfId}">
    <input type="hidden"  name="xmlId" value="{$xmlId}">
    <input type="hidden"  name="spId" value="{$spId}">
    <input type="hidden"  name="proLevel" value="{$proLevel}">
    <input type="hidden"  name="proTimes" value="{$proTimes}">
    <input type="hidden"  name="proState" value="{$proState}">
    <input type="hidden"  name="fileId" value="{$file_id}">
    <a href="javascript:;" class="a-upload">
        <input id="file-picker" type="file" name="file"  onchange="inputfile(this)" multiple webkitdirectory>
        <span>请先点击这里上传文件</span>
    </a>
    <button  type="submit" class="btn-default" data-icon="save"  id="upload-button" disabled>上传</button>
    <br/>
    <br/>
    <fieldset id="progress" style="display: none">
        <legend>Files Progress</legend>
        <div class="progress-trough">
            <div id="progress-bar" class="progress-bar">0%</div>
        </div>
    </fieldset>
</form>
<div id="alter" style="color:#a09e9e;margin-top:20px;">
    <span>注意：</span><br/><br/>
    <span>1.单个文件大小控制在200M以内,文件较大时，请拆分后，依次上传</span><br/><br/>
    <span>2.此功能只在google浏览器下有效</span><br/><br/>
    <span>3.支持的文件后缀：'jpg', 'gif', 'png', 'jpeg', 'pdf', 'doc', 'docx', 'ppt', 'pptx', 'xlsx', 'xls'</span><br/><br/>
    <span>4.更多详情，请看“上传功能提示!”选项</span>
</div>
</body>
</html>
<script type="text/javascript">
    var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
    if (!isChrome) {
        $("#alter").append('此浏览器非Chrome浏览器，将不支持文件夹上传，请知悉。');
    }
    function inputfile(e){
        if($(e).val()==''){
            $(e).siblings('span').html('请先点击这里上传文件');
        }else{
            $(e).siblings('span').html('文件已经就绪，可以上传了');
            $(e).closest('a').css('background','#56b550');
            $('#upload-button').removeAttr('disabled');
        }
    }
</script>